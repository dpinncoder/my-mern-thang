(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8803],{17052:function(I){I.exports={container:"container___1Cqhv",lang:"lang___1jfH8",content:"content___2bfN4",top:"top___2VoTJ",header:"header___2DQaA",logo:"logo___gZAM9",title:"title___6_3G_",desc:"desc___1AHTV",main:"main___2kx2N",icon:"icon___2LGPN",other:"other___1b6DE",register:"register___1YFU-",prefixIcon:"prefixIcon___2lDRe"}},87909:function(I,T,r){"use strict";r.r(T),r.d(T,{default:function(){return se}});var E=r(57663),_=r(71577),k=r(20136),h=r(55241),x=r(34669),N=r(54458),L=r(34792),C=r(48086),w=r(3182),Z=r(2824),p=r(47673),a=r(4107),t=r(43358),i=r(34041),u=r(9715),f=r(86835),n=r(94043),l=r.n(n),U=r(67294),F=r(43581),G=r(73727),V=r(39031);function J(S){return z.apply(this,arguments)}function z(){return z=(0,w.Z)(l().mark(function S(M){var P;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,V.v_)("/api/auth/register",M);case 2:return P=o.sent,o.abrupt("return",P);case 4:case"end":return o.stop()}},S)})),z.apply(this,arguments)}function Y(S){return A.apply(this,arguments)}function A(){return A=(0,w.Z)(l().mark(function S(M){var P;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,V.v_)("/api/auth/check-username",M);case 2:return P=o.sent,o.abrupt("return",P);case 4:case"end":return o.stop()}},S)})),A.apply(this,arguments)}var Q=r(17052),m=r.n(Q),e=r(85893),y=f.Z.Item,je=i.Z.Option,_e=a.Z.Group,q={ok:(0,e.jsx)("div",{className:m().success,children:(0,e.jsx)("span",{children:"Strength: strong"})}),pass:(0,e.jsx)("div",{className:m().warning,children:(0,e.jsx)("span",{children:"Strength: Medium"})}),poor:(0,e.jsx)("div",{className:m().error,children:(0,e.jsx)("span",{children:"Strength: too short"})})},ee={ok:"success",pass:"normal",poor:"exception"},re=function(){var M=(0,U.useState)(0),P=(0,Z.Z)(M,2),X=P[0],o=P[1],ae=(0,U.useState)(!1),B=(0,Z.Z)(ae,2),R=B[0],$=B[1],te=(0,U.useState)("86"),H=(0,Z.Z)(te,2),ye=H[0],ne=H[1],le=(0,U.useState)(!1),W=(0,Z.Z)(le,2),ue=W[0],ie=W[1],oe=(0,F.YB)(),ce=!1,D,de=f.Z.useForm(),me=(0,Z.Z)(de,1),b=me[0];(0,U.useEffect)(function(){return function(){clearInterval(D)}},[D]);var Pe=function(){var s=59;o(s),D=window.setInterval(function(){s-=1,o(s),s===0&&clearInterval(D)},1e3)},K=function(){var s=b.getFieldValue("password");return s&&s.length>9?"ok":s&&s.length>5?"pass":"poor"},pe=function(){var v=(0,w.Z)(l().mark(function s(c){var d;return l().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,J(c);case 2:d=g.sent,console.log(d),d.error?C.default.error(d.error.message):(C.default.success("Registration successful! Please check your email to activate your account."),F.m8.push({pathname:"/user/login"}));case 5:case"end":return g.stop()}},s)}));return function(c){return v.apply(this,arguments)}}(),he=function(s,c){var d=Promise;return c&&c!==b.getFieldValue("password")?d.reject("The passwords entered twice do not match!"):d.resolve()},fe=function(s,c){var d=Promise;return c?(R||$(!!c),ie(!ue),c.length<6?d.reject(""):(c&&ce&&b.validateFields(["confirm"]),d.resolve())):($(!!c),d.reject("Please enter your password!"))},ve=function(){var v=(0,w.Z)(l().mark(function s(c,d){var O,g;return l().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(O=Promise,d){j.next=4;break}return $(!!d),j.abrupt("return",O.reject("Please enter your username!"));case 4:return j.next=6,Y({username:d});case 6:if(g=j.sent,g.status!=="available"){j.next=11;break}return j.abrupt("return",O.resolve());case 11:return console.log(JSON.stringify(g)),j.abrupt("return",O.reject(g.message));case 13:case"end":return j.stop()}},s)}));return function(c,d){return v.apply(this,arguments)}}(),xe=function(s){ne(s)},ge=function(){var s=b.getFieldValue("password"),c=K();return s&&s.length?(0,e.jsx)("div",{className:m()["progress-".concat(c)],children:(0,e.jsx)(N.Z,{status:ee[c],className:m().progress,strokeWidth:6,percent:s.length*10>100?100:s.length*10,showInfo:!1})}):null};return(0,e.jsx)("div",{className:m().container,children:(0,e.jsxs)("div",{className:m().content,children:[(0,e.jsxs)("div",{className:m().top,children:[(0,e.jsx)("div",{className:m().header,children:(0,e.jsxs)(G.rU,{to:"/",children:[(0,e.jsx)("img",{alt:"logo",className:m().logo,src:"/logo.svg"}),(0,e.jsx)("span",{className:m().title,children:"Register"})]})}),(0,e.jsx)("div",{className:m().desc,children:oe.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,e.jsx)("div",{className:m().main,children:(0,e.jsxs)(f.Z,{form:b,name:"UserRegister",onFinish:pe,children:[(0,e.jsx)(y,{name:"firstName",rules:[{required:!0,message:"Please input the first name!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"First name"})}),(0,e.jsx)(y,{name:"lastName",rules:[{required:!0,message:"Please input the last name!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Last name"})}),(0,e.jsx)(y,{name:"username",rules:[{validator:ve}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Username"})}),(0,e.jsx)(y,{name:"email",rules:[{required:!0,message:"Please input the email address!"},{type:"email",message:"Email address format error!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Email"})}),(0,e.jsx)(y,{name:"phoneNumber",rules:[{required:!0,message:"Please enter phone number!"},{pattern:/^01[0-9]{9}$/,message:"Malformed phone number!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"eg. 01XXXXXXXXX"})}),(0,e.jsx)(h.Z,{getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},content:R&&(0,e.jsxs)("div",{style:{padding:"4px 0"},children:[q[K()],ge(),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("span",{children:"Please enter at least 6 characters. Please do not use passwords that are easy to guess."})})]}),overlayStyle:{width:240},placement:"right",visible:R,children:(0,e.jsx)(y,{name:"password",className:b.getFieldValue("password")&&b.getFieldValue("password").length>0&&m().password,rules:[{validator:fe}],children:(0,e.jsx)(a.Z,{size:"large",type:"password",placeholder:"At least 6 digit password, case sensitive"})})}),(0,e.jsx)(y,{name:"confirm",rules:[{required:!0,message:"Confirm password"},{validator:he}],children:(0,e.jsx)(a.Z,{size:"large",type:"password",placeholder:"Confirm password"})}),(0,e.jsxs)(y,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{block:!0,className:m().submit,type:"primary",htmlType:"submit",children:(0,e.jsx)("span",{children:"Register"})})}),(0,e.jsx)("div",{style:{marginTop:24},children:(0,e.jsx)(_.Z,{block:!0,type:"default",children:(0,e.jsx)(G.rU,{to:"/user/login",children:(0,e.jsx)(F._H,{id:"pages.login.submit",defaultMessage:"Login"})})})})]})]})})]})})},se=re},39031:function(I,T,r){"use strict";r.d(T,{U2:function(){return L},v_:function(){return C},gz:function(){return w},IV:function(){return Z}});var E=r(3182),_=r(11849),k=r(94043),h=r.n(k),x=r(11238),N=r(43581);x.ZP.interceptors.request.use(function(p,a){var t=localStorage.getItem("auth");if(t&&JSON.parse(t)){var i=JSON.parse(t),u=i.token;u?a.headers.Authorization="Bearer ".concat(u):a.headers.Authorization=null}return console.log("url","http://localhost:8002",p),a.headers["rbac-client-time"]="".concat(new Date," "),{url:"".concat("http://localhost:8002").concat(p),options:(0,_.Z)((0,_.Z)({},a),{},{interceptors:!0})}}),x.ZP.interceptors.response.use(function(){var p=(0,E.Z)(h().mark(function a(t,i){var u,f;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t.status!==401){l.next=4;break}return localStorage.removeItem("auth"),N.m8.replace({pathname:"/user/login"}),l.abrupt("return",{name:t.name});case 4:if(t.status!==403){l.next=7;break}return N.m8.replace({pathname:"/exception/403"}),l.abrupt("return",{name:t.name});case 7:if(t.status!==404){l.next=10;break}return N.m8.replace({pathname:"/exception/404"}),l.abrupt("return",{name:t.name});case 10:if(t.status!==400){l.next=18;break}return l.next=13,t.clone().json();case 13:return u=l.sent,console.log("data",u),f=new Error(u.message),f.error=u.error,l.abrupt("return",f);case 18:return l.abrupt("return",t);case 19:case"end":return l.stop()}},a)}));return function(a,t){return p.apply(this,arguments)}}());var L=function(){var p=(0,E.Z)(h().mark(function a(t,i,u){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,x.ZP)(t,(0,_.Z)({method:"GET",params:i,skipErrorHandler:!0},u||{})));case 1:case"end":return n.stop()}},a)}));return function(t,i,u){return p.apply(this,arguments)}}(),C=function(){var p=(0,E.Z)(h().mark(function a(t,i,u){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)(t,(0,_.Z)({method:"POST",data:i,skipErrorHandler:!0},u||{}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},a)}));return function(t,i,u){return p.apply(this,arguments)}}(),w=function(){var p=(0,E.Z)(h().mark(function a(t,i,u){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,x.ZP)(t,(0,_.Z)({method:"PUT",data:i,skipErrorHandler:!0},u||{})));case 1:case"end":return n.stop()}},a)}));return function(t,i,u){return p.apply(this,arguments)}}(),Z=function(){var p=(0,E.Z)(h().mark(function a(t,i,u){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,x.ZP)(t,(0,_.Z)({method:"DELETE",data:i,skipErrorHandler:!0},u||{})));case 1:case"end":return n.stop()}},a)}));return function(t,i,u){return p.apply(this,arguments)}}()}}]);
