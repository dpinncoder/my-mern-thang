(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8803],{17052:function(D){D.exports={container:"container___1Cqhv",lang:"lang___1jfH8",content:"content___2bfN4",top:"top___2VoTJ",header:"header___2DQaA",logo:"logo___gZAM9",title:"title___6_3G_",desc:"desc___1AHTV",main:"main___2kx2N",icon:"icon___2LGPN",other:"other___1b6DE",register:"register___1YFU-",prefixIcon:"prefixIcon___2lDRe"}},87909:function(D,O,r){"use strict";r.r(O),r.d(O,{default:function(){return se}});var E=r(57663),_=r(71577),L=r(20136),h=r(55241),y=r(34669),I=r(54458),G=r(34792),T=r(48086),w=r(3182),Z=r(2824),p=r(47673),a=r(4107),n=r(43358),u=r(34041),l=r(9715),f=r(93766),t=r(94043),i=r.n(t),N=r(67294),F=r(43581),V=r(73727),X=r(39031);function J(S){return z.apply(this,arguments)}function z(){return z=(0,w.Z)(i().mark(function S(U){var P;return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,X.v_)("/api/auth/register",U);case 2:return P=o.sent,o.abrupt("return",P);case 4:case"end":return o.stop()}},S)})),z.apply(this,arguments)}function Y(S){return A.apply(this,arguments)}function A(){return A=(0,w.Z)(i().mark(function S(U){var P;return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,X.v_)("/api/auth/check-username",U);case 2:return P=o.sent,o.abrupt("return",P);case 4:case"end":return o.stop()}},S)})),A.apply(this,arguments)}var Q=r(17052),m=r.n(Q),e=r(85893),x=f.Z.Item,je=u.Z.Option,_e=a.Z.Group,q={ok:(0,e.jsx)("div",{className:m().success,children:(0,e.jsx)("span",{children:"Strength: strong"})}),pass:(0,e.jsx)("div",{className:m().warning,children:(0,e.jsx)("span",{children:"Strength: Medium"})}),poor:(0,e.jsx)("div",{className:m().error,children:(0,e.jsx)("span",{children:"Strength: too short"})})},ee={ok:"success",pass:"normal",poor:"exception"},re=function(){var U=(0,N.useState)(0),P=(0,Z.Z)(U,2),k=P[0],o=P[1],ae=(0,N.useState)(!1),B=(0,Z.Z)(ae,2),R=B[0],$=B[1],te=(0,N.useState)("86"),H=(0,Z.Z)(te,2),xe=H[0],ne=H[1],le=(0,N.useState)(!1),W=(0,Z.Z)(le,2),ie=W[0],ue=W[1],oe=(0,F.YB)(),ce=!1,C,de=f.Z.useForm(),me=(0,Z.Z)(de,1),b=me[0];(0,N.useEffect)(function(){return function(){clearInterval(C)}},[C]);var Pe=function(){var s=59;o(s),C=window.setInterval(function(){s-=1,o(s),s===0&&clearInterval(C)},1e3)},K=function(){var s=b.getFieldValue("password");return s&&s.length>9?"ok":s&&s.length>5?"pass":"poor"},pe=function(){var v=(0,w.Z)(i().mark(function s(c){var d;return i().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,J(c);case 2:d=g.sent,console.log(d),d.error?T.default.error(d.error.message):(T.default.success("Registration successful!"),F.m8.push({pathname:"/user/login"}));case 5:case"end":return g.stop()}},s)}));return function(c){return v.apply(this,arguments)}}(),he=function(s,c){var d=Promise;return c&&c!==b.getFieldValue("password")?d.reject("The passwords entered twice do not match!"):d.resolve()},fe=function(s,c){var d=Promise;return c?(R||$(!!c),ue(!ie),c.length<6?d.reject(""):(c&&ce&&b.validateFields(["confirm"]),d.resolve())):($(!!c),d.reject("Please enter your password!"))},ve=function(){var v=(0,w.Z)(i().mark(function s(c,d){var M,g;return i().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(M=Promise,d){j.next=4;break}return $(!!d),j.abrupt("return",M.reject("Please enter your username!"));case 4:return j.next=6,Y({username:d});case 6:if(g=j.sent,g.status!=="available"){j.next=11;break}return j.abrupt("return",M.resolve());case 11:return console.log(JSON.stringify(g)),j.abrupt("return",M.reject(g.message));case 13:case"end":return j.stop()}},s)}));return function(c,d){return v.apply(this,arguments)}}(),ye=function(s){ne(s)},ge=function(){var s=b.getFieldValue("password"),c=K();return s&&s.length?(0,e.jsx)("div",{className:m()["progress-".concat(c)],children:(0,e.jsx)(I.Z,{status:ee[c],className:m().progress,strokeWidth:6,percent:s.length*10>100?100:s.length*10,showInfo:!1})}):null};return(0,e.jsx)("div",{className:m().container,children:(0,e.jsxs)("div",{className:m().content,children:[(0,e.jsxs)("div",{className:m().top,children:[(0,e.jsx)("div",{className:m().header,children:(0,e.jsxs)(V.rU,{to:"/",children:[(0,e.jsx)("img",{alt:"logo",className:m().logo,src:"/logo.svg"}),(0,e.jsx)("span",{className:m().title,children:"Register"})]})}),(0,e.jsx)("div",{className:m().desc,children:oe.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,e.jsx)("div",{className:m().main,children:(0,e.jsxs)(f.Z,{form:b,name:"UserRegister",onFinish:pe,children:[(0,e.jsx)(x,{name:"firstName",rules:[{required:!0,message:"Please input the first name!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"First name"})}),(0,e.jsx)(x,{name:"lastName",rules:[{required:!0,message:"Please input the last name!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Last name"})}),(0,e.jsx)(x,{name:"username",rules:[{validator:ve}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Username"})}),(0,e.jsx)(x,{name:"email",rules:[{required:!0,message:"Please input the email address!"},{type:"email",message:"Email address format error!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"Email"})}),(0,e.jsx)(x,{name:"phoneNumber",rules:[{required:!0,message:"Please enter phone number!"},{pattern:/^01[0-9]{9}$/,message:"Malformed phone number!"}],children:(0,e.jsx)(a.Z,{size:"large",placeholder:"eg. 01XXXXXXXXX"})}),(0,e.jsx)(h.Z,{getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},content:R&&(0,e.jsxs)("div",{style:{padding:"4px 0"},children:[q[K()],ge(),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("span",{children:"Please enter at least 6 characters. Please do not use passwords that are easy to guess."})})]}),overlayStyle:{width:240},placement:"right",visible:R,children:(0,e.jsx)(x,{name:"password",className:b.getFieldValue("password")&&b.getFieldValue("password").length>0&&m().password,rules:[{validator:fe}],children:(0,e.jsx)(a.Z,{size:"large",type:"password",placeholder:"At least 6 digit password, case sensitive"})})}),(0,e.jsx)(x,{name:"confirm",rules:[{required:!0,message:"Confirm password"},{validator:he}],children:(0,e.jsx)(a.Z,{size:"large",type:"password",placeholder:"Confirm password"})}),(0,e.jsxs)(x,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{block:!0,className:m().submit,type:"primary",htmlType:"submit",children:(0,e.jsx)("span",{children:"Register"})})}),(0,e.jsx)("div",{style:{marginTop:24},children:(0,e.jsx)(_.Z,{block:!0,type:"default",children:(0,e.jsx)(V.rU,{to:"/user/login",children:(0,e.jsx)(F._H,{id:"pages.login.register",defaultMessage:"Login"})})})})]})]})})]})})},se=re},39031:function(D,O,r){"use strict";r.d(O,{U2:function(){return G},v_:function(){return T},gz:function(){return w},IV:function(){return Z}});var E=r(3182),_=r(11849),L=r(94043),h=r.n(L),y=r(11238),I=r(43581);y.ZP.interceptors.request.use(function(p,a){var n=localStorage.getItem("auth");if(n&&JSON.parse(n)){var u=JSON.parse(n),l=u.token;l?a.headers.Authorization="Bearer ".concat(l):a.headers.Authorization=null}return console.log("url","http://localhost:8002",p),a.headers["rbac-client-time"]="".concat(new Date," "),{url:"".concat("http://localhost:8002").concat(p),options:(0,_.Z)((0,_.Z)({},a),{},{interceptors:!0})}}),y.ZP.interceptors.response.use(function(){var p=(0,E.Z)(h().mark(function a(n,u){var l,f;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.status!==401){i.next=4;break}return localStorage.removeItem("auth"),I.m8.replace({pathname:"/user/login"}),i.abrupt("return",{name:n.name});case 4:if(n.status!==400){i.next=12;break}return i.next=7,n.clone().json();case 7:return l=i.sent,console.log("data",l),f=new Error(l.message),f.error=l.error,i.abrupt("return",f);case 12:return i.abrupt("return",n);case 13:case"end":return i.stop()}},a)}));return function(a,n){return p.apply(this,arguments)}}());var G=function(){var p=(0,E.Z)(h().mark(function a(n,u,l){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.ZP)(n,(0,_.Z)({method:"GET",params:u,skipErrorHandler:!0},l||{})));case 1:case"end":return t.stop()}},a)}));return function(n,u,l){return p.apply(this,arguments)}}(),T=function(){var p=(0,E.Z)(h().mark(function a(n,u,l){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.ZP)(n,(0,_.Z)({method:"POST",data:u,skipErrorHandler:!0},l||{}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)}));return function(n,u,l){return p.apply(this,arguments)}}(),w=function(){var p=(0,E.Z)(h().mark(function a(n,u,l){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.ZP)(n,(0,_.Z)({method:"PUT",data:u,skipErrorHandler:!0},l||{})));case 1:case"end":return t.stop()}},a)}));return function(n,u,l){return p.apply(this,arguments)}}(),Z=function(){var p=(0,E.Z)(h().mark(function a(n,u,l){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.ZP)(n,(0,_.Z)({method:"DELETE",data:u,skipErrorHandler:!0},l||{})));case 1:case"end":return t.stop()}},a)}));return function(n,u,l){return p.apply(this,arguments)}}()}}]);
