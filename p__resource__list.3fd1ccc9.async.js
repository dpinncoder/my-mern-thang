(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1032],{16894:function(B,C,e){"use strict";var v=e(7381),g=e(29443);C.ZP=g.Z},52514:function(B,C,e){"use strict";e.r(C);var v=e(14781),g=e(40308),f=e(13062),o=e(71230),b=e(57663),M=e(71577),I=e(89032),T=e(15746),A=e(47673),U=e(4107),p=e(9715),t=e(93766),n=e(11849),i=e(34792),_=e(48086),h=e(3182),r=e(71194),a=e(50146),m=e(2824),u=e(94043),s=e.n(u),Q=e(57119),V=e(49101),y=e(67294),X=e(75362),Y=e(16894),W=e(43581),L=e(23689),c=e(85893),q=function(){var ee=(0,y.useRef)(),re=(0,y.useState)({data:[]}),S=(0,m.Z)(re,2),ne=S[0],te=S[1],ae=(0,y.useState)(1),j=(0,m.Z)(ae,2),w=j[0],z=j[1],se=(0,y.useState)({}),k=(0,m.Z)(se,2),K=k[0],$=k[1],_e=(0,y.useState)({}),F=(0,m.Z)(_e,2),ue=F[0],x=F[1],le=(0,y.useState)(0),N=(0,m.Z)(le,2),oe=N[0],ie=N[1],ce=(0,y.useState)(!1),J=(0,m.Z)(ce,2),G=J[0],Z=J[1],de=a.Z.confirm,me=function(){var P=(0,h.Z)(s().mark(function l(){var E,D,O,R;return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return E=_.default.loading("Loading..."),d.prev=1,d.next=4,(0,L.yC)((0,n.Z)((0,n.Z)({current:w,pageSize:10},K),ue));case 4:return D=d.sent,E(),te(D),Z(!1),d.abrupt("return",D);case 11:return d.prev=11,d.t0=d.catch(1),E(),O=JSON.stringify(d.t0),R=JSON.parse(O),console.log(R),_.default.error(R.data.errorMessage),d.abrupt("return",!1);case 19:case"end":return d.stop()}},l,null,[[1,11]])}));return function(){return P.apply(this,arguments)}}(),fe=function(l){de({title:"Do you Want to delete ".concat(l.name,"?"),icon:(0,c.jsx)(Q.Z,{}),content:"".concat(l.name," will be deleted permanently."),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var E=(0,h.Z)(s().mark(function O(){var R;return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("OK"),d.next=3,(0,L.Od)(l._id);case 3:R=d.sent,R.success&&(_.default.success(R.message),Z(!0));case 5:case"end":return d.stop()}},O)}));function D(){return E.apply(this,arguments)}return D}(),onCancel:function(){console.log("Cancel")}})},pe=function(){var P=(0,h.Z)(s().mark(function l(){var E;return s().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,L.QX)((0,n.Z)({},K));case 2:E=O.sent,ie(E.total);case 4:case"end":return O.stop()}},l)}));return function(){return P.apply(this,arguments)}}();(0,y.useEffect)(function(){G&&me()},[G]),(0,y.useEffect)(function(){z(1),x(null),Z(!0),pe()},[K]);var he=t.Z.useForm(),Ee=(0,m.Z)(he,1),H=Ee[0],ve=function(l){$(l)},Oe=[{title:"Name",dataIndex:"name",sorter:!0,tip:"Resource name",render:function(l,E){return(0,c.jsx)("a",{onClick:function(){W.m8.push("/resources/edit/".concat(E._id))},children:l})}},{title:"Alias",dataIndex:"alias"},{title:"Type",dataIndex:"type"},{title:"Actions",dataIndex:"option",valueType:"option",render:function(l,E){return[(0,c.jsx)("a",{onClick:function(){fe(E)},children:"Delete"},"config")]}}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(X.ZP,{children:[(0,c.jsx)(t.Z,{form:H,name:"advanced_search",className:"ant-advanced-search-form",onFinish:ve,style:{display:"flex","align-items":"left",background:"white",padding:"10px"},children:(0,c.jsxs)(o.Z,{gutter:4,style:{width:"50%"},children:[(0,c.jsx)(T.Z,{flex:16,children:(0,c.jsx)(t.Z.Item,{name:"name",label:"Name",children:(0,c.jsx)(U.Z,{placeholder:"Search keyword for name or alias"})})},"name"),(0,c.jsxs)(T.Z,{flex:8,children:[(0,c.jsx)(M.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,c.jsx)(M.Z,{style:{margin:"0 8px"},onClick:function(){H.resetFields()},children:"Clear"})]})]})}),(0,c.jsx)(Y.ZP,{headerTitle:"Resources",actionRef:ee,rowKey:"_id",search:!1,options:{reload:!1},toolBarRender:function(){return[(0,c.jsxs)(M.Z,{type:"primary",onClick:function(){W.m8.push("/resources/new")},children:[(0,c.jsx)(V.Z,{})," New"]},"primary")]},onChange:function(l,E,D){console.log("_sorter",D);var O={};O.sort=D.field,O.order=D.order==="ascend"?1:-1,x(O),Z(!0)},onSubmit:function(l){console.log(l),$(l)},dataSource:ne.data,columns:Oe,rowSelection:!1,pagination:!1})]}),(0,c.jsx)(g.Z,{total:oe,showSizeChanger:!1,showQuickJumper:!1,showTotal:function(l){return"Total ".concat(l," items")},defaultCurrent:w,onChange:function(l,E){z(l),Z(!0)},style:{display:"flex","justify-content":"center","align-items":"center",background:"white",padding:"10px"}})]})};C.default=q},23689:function(B,C,e){"use strict";e.d(C,{yC:function(){return b},QX:function(){return I},FO:function(){return A},Vx:function(){return p},a1:function(){return n},Od:function(){return _}});var v=e(3182),g=e(94043),f=e.n(g),o=e(39031);function b(r){return M.apply(this,arguments)}function M(){return M=(0,v.Z)(f().mark(function r(a){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,o.v_)("/api/resources/search",a);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),M.apply(this,arguments)}function I(r,a){return T.apply(this,arguments)}function T(){return T=(0,v.Z)(f().mark(function r(a,m){return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,o.v_)("/api/resources/count",a,m);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)})),T.apply(this,arguments)}function A(r,a){return U.apply(this,arguments)}function U(){return U=(0,v.Z)(f().mark(function r(a,m){return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,o.U2)("/api/resources/".concat(a),{},m);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)})),U.apply(this,arguments)}function p(r){return t.apply(this,arguments)}function t(){return t=(0,v.Z)(f().mark(function r(a){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,o.gz)("/api/resources",a);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),t.apply(this,arguments)}function n(r){return i.apply(this,arguments)}function i(){return i=(0,v.Z)(f().mark(function r(a){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,o.v_)("/api/resources",a);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),i.apply(this,arguments)}function _(r,a){return h.apply(this,arguments)}function h(){return h=(0,v.Z)(f().mark(function r(a,m){return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,o.IV)("/api/resources/".concat(a),{},m);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)})),h.apply(this,arguments)}},39031:function(B,C,e){"use strict";e.d(C,{U2:function(){return I},v_:function(){return T},gz:function(){return A},IV:function(){return U}});var v=e(3182),g=e(11849),f=e(94043),o=e.n(f),b=e(11238),M=e(43581);b.ZP.interceptors.request.use(function(p,t){var n=localStorage.getItem("auth");if(n&&JSON.parse(n)){var i=JSON.parse(n),_=i.token;_?t.headers.Authorization="Bearer ".concat(_):t.headers.Authorization=null}return console.log("url","http://localhost:8002",p),t.headers["rbac-client-time"]="".concat(new Date," "),{url:"".concat("http://localhost:8002").concat(p),options:(0,g.Z)((0,g.Z)({},t),{},{interceptors:!0})}}),b.ZP.interceptors.response.use(function(){var p=(0,v.Z)(o().mark(function t(n,i){var _,h;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.status!==401){a.next=4;break}return localStorage.removeItem("auth"),M.m8.replace({pathname:"/user/login"}),a.abrupt("return",{name:n.name});case 4:if(n.status!==400){a.next=12;break}return a.next=7,n.clone().json();case 7:return _=a.sent,console.log("data",_),h=new Error(_.message),h.error=_.error,a.abrupt("return",h);case 12:return a.abrupt("return",n);case 13:case"end":return a.stop()}},t)}));return function(t,n){return p.apply(this,arguments)}}());var I=function(){var p=(0,v.Z)(o().mark(function t(n,i,_){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,b.ZP)(n,(0,g.Z)({method:"GET",params:i,skipErrorHandler:!0},_||{})));case 1:case"end":return r.stop()}},t)}));return function(n,i,_){return p.apply(this,arguments)}}(),T=function(){var p=(0,v.Z)(o().mark(function t(n,i,_){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)(n,(0,g.Z)({method:"POST",data:i,skipErrorHandler:!0},_||{}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},t)}));return function(n,i,_){return p.apply(this,arguments)}}(),A=function(){var p=(0,v.Z)(o().mark(function t(n,i,_){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,b.ZP)(n,(0,g.Z)({method:"PUT",data:i,skipErrorHandler:!0},_||{})));case 1:case"end":return r.stop()}},t)}));return function(n,i,_){return p.apply(this,arguments)}}(),U=function(){var p=(0,v.Z)(o().mark(function t(n,i,_){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,b.ZP)(n,(0,g.Z)({method:"DELETE",data:i,skipErrorHandler:!0},_||{})));case 1:case"end":return r.stop()}},t)}));return function(n,i,_){return p.apply(this,arguments)}}()}}]);
