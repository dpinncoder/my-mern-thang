(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2812],{16894:function(L,T,e){"use strict";var E=e(7381),O=e(29443);T.ZP=O.Z},83318:function(L,T,e){"use strict";e.r(T);var E=e(14781),O=e(40308),m=e(13062),i=e(71230),g=e(57663),M=e(71577),B=e(89032),b=e(15746),A=e(47673),Z=e(4107),f=e(9715),t=e(93766),n=e(11849),c=e(34792),s=e(48086),p=e(3182),r=e(71194),_=e(50146),y=e(14965),u=e(14072),a=e(2824),V=e(94043),U=e.n(V),X=e(57119),Y=e(49101),C=e(67294),q=e(75362),ee=e(16894),S=e(43581),K=e(90380),o=e(85893),re=function(){var te=(0,C.useRef)(),ne=(0,C.useState)({data:[]}),j=(0,a.Z)(ne,2),ae=j[0],_e=j[1],se=(0,C.useState)(1),z=(0,a.Z)(se,2),w=z[0],x=z[1],ue=(0,C.useState)({}),k=(0,a.Z)(ue,2),W=k[0],$=k[1],le=(0,C.useState)({}),F=(0,a.Z)(le,2),oe=F[0],N=F[1],ie=(0,C.useState)(0),J=(0,a.Z)(ie,2),ce=J[0],de=J[1],me=(0,C.useState)(!1),G=(0,a.Z)(me,2),H=G[0],R=G[1],fe=u.Z.RangePicker,pe=_.Z.confirm,he=function(){var v=(0,p.Z)(U().mark(function l(){var h,D,P,I;return U().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return h=s.default.loading("Loading..."),d.prev=1,d.next=4,(0,K.yC)((0,n.Z)((0,n.Z)({current:w,pageSize:10},W),oe));case 4:return D=d.sent,h(),_e(D),R(!1),d.abrupt("return",D);case 11:return d.prev=11,d.t0=d.catch(1),h(),P=JSON.stringify(d.t0),I=JSON.parse(P),console.log(I),s.default.error(I.data.errorMessage),d.abrupt("return",!1);case 19:case"end":return d.stop()}},l,null,[[1,11]])}));return function(){return v.apply(this,arguments)}}(),Ee=function(l){pe({title:"Do you Want to delete ".concat(l.name,"?"),icon:(0,o.jsx)(X.Z,{}),content:"".concat(l.name," will be deleted permanently."),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var h=(0,p.Z)(U().mark(function P(){var I;return U().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("OK"),d.next=3,(0,K.Od)(l._id);case 3:I=d.sent,I.success&&(s.default.success(I.message),R(!0));case 5:case"end":return d.stop()}},P)}));function D(){return h.apply(this,arguments)}return D}(),onCancel:function(){console.log("Cancel")}})},ve=function(){var v=(0,p.Z)(U().mark(function l(){var h;return U().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,K.QX)((0,n.Z)({},W));case 2:h=P.sent,de(h.total);case 4:case"end":return P.stop()}},l)}));return function(){return v.apply(this,arguments)}}();(0,C.useEffect)(function(){H&&he()},[H]),(0,C.useEffect)(function(){x(1),N(null),R(!0),ve()},[W]);var Pe=t.Z.useForm(),Oe=(0,a.Z)(Pe,1),Q=Oe[0],De=function(l){$(l)},ge=[{title:"Name",dataIndex:"name",sorter:!0,tip:"Name of the product",render:function(l,h){return(0,o.jsx)("a",{onClick:function(){S.m8.push("/products/edit/".concat(h._id))},children:l})}},{title:"Description",dataIndex:"description",valueType:"textarea"},{title:"Price",dataIndex:"price",sorter:!0,renderText:function(l){return"".concat(l)}},{title:"Size",dataIndex:"size"},{title:"Manufacturing date",sorter:!0,dataIndex:"manufacturingDate",valueType:"dateTime"},{title:"Actions",dataIndex:"option",valueType:"option",render:function(l,h){return[(0,o.jsx)("a",{onClick:function(){Ee(h)},children:"Delete"},"config")]}}];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(q.ZP,{children:[(0,o.jsx)(t.Z,{form:Q,name:"advanced_search",className:"ant-advanced-search-form",onFinish:De,style:{display:"flex","align-items":"left",background:"white",padding:"10px"},children:(0,o.jsxs)(i.Z,{gutter:16,children:[(0,o.jsx)(b.Z,{flex:6,children:(0,o.jsx)(t.Z.Item,{name:"name",label:"Name",children:(0,o.jsx)(Z.Z,{placeholder:"Search keyword for name"})})},"name"),(0,o.jsx)(b.Z,{flex:6,children:(0,o.jsx)(t.Z.Item,{name:"size",label:"Size",children:(0,o.jsx)(Z.Z,{placeholder:"Search keyword for size"})})},"size"),(0,o.jsx)(t.Z.Item,{name:"manufacturingDateRange",label:"M. date",children:(0,o.jsx)(fe,{})}),(0,o.jsxs)(b.Z,{flex:6,children:[(0,o.jsx)(M.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,o.jsx)(M.Z,{style:{margin:"0 8px"},onClick:function(){Q.resetFields()},children:"Clear"})]})]})}),(0,o.jsx)(ee.ZP,{headerTitle:"Products",actionRef:te,rowKey:"_id",search:!1,options:{reload:!1},toolBarRender:function(){return[(0,o.jsxs)(M.Z,{type:"primary",onClick:function(){S.m8.push("/products/new")},children:[(0,o.jsx)(Y.Z,{})," New"]},"primary")]},onChange:function(l,h,D){console.log("_sorter",D);var P={};P.sort=D.field,P.order=D.order==="ascend"?1:-1,N(P),R(!0)},onSubmit:function(l){console.log(l),$(l)},dataSource:ae.data,columns:ge,rowSelection:!1,pagination:!1})]}),(0,o.jsx)(O.Z,{total:ce,showSizeChanger:!1,showQuickJumper:!1,showTotal:function(l){return"Total ".concat(l," items")},defaultCurrent:w,onChange:function(l,h){x(l),R(!0)},style:{display:"flex","justify-content":"center","align-items":"center",background:"white",padding:"10px"}})]})};T.default=re},90380:function(L,T,e){"use strict";e.d(T,{yC:function(){return g},QX:function(){return B},FO:function(){return A},Vx:function(){return f},a1:function(){return n},Od:function(){return s}});var E=e(3182),O=e(94043),m=e.n(O),i=e(39031);function g(r){return M.apply(this,arguments)}function M(){return M=(0,E.Z)(m().mark(function r(_){return m().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.v_)("/api/products/search",_);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),M.apply(this,arguments)}function B(r,_){return b.apply(this,arguments)}function b(){return b=(0,E.Z)(m().mark(function r(_,y){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,i.v_)("/api/products/count",_,y);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},r)})),b.apply(this,arguments)}function A(r,_){return Z.apply(this,arguments)}function Z(){return Z=(0,E.Z)(m().mark(function r(_,y){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,i.U2)("/api/products/".concat(_),{},y);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},r)})),Z.apply(this,arguments)}function f(r){return t.apply(this,arguments)}function t(){return t=(0,E.Z)(m().mark(function r(_){return m().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.gz)("/api/products",_);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),t.apply(this,arguments)}function n(r){return c.apply(this,arguments)}function c(){return c=(0,E.Z)(m().mark(function r(_){return m().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.v_)("/api/products",_);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),c.apply(this,arguments)}function s(r,_){return p.apply(this,arguments)}function p(){return p=(0,E.Z)(m().mark(function r(_,y){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,i.IV)("/api/products/".concat(_),{},y);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},r)})),p.apply(this,arguments)}},39031:function(L,T,e){"use strict";e.d(T,{U2:function(){return B},v_:function(){return b},gz:function(){return A},IV:function(){return Z}});var E=e(3182),O=e(11849),m=e(94043),i=e.n(m),g=e(11238),M=e(43581);g.ZP.interceptors.request.use(function(f,t){var n=localStorage.getItem("auth");if(n&&JSON.parse(n)){var c=JSON.parse(n),s=c.token;s?t.headers.Authorization="Bearer ".concat(s):t.headers.Authorization=null}return console.log("url","http://localhost:8002",f),t.headers["rbac-client-time"]="".concat(new Date," "),{url:"".concat("http://localhost:8002").concat(f),options:(0,O.Z)((0,O.Z)({},t),{},{interceptors:!0})}}),g.ZP.interceptors.response.use(function(){var f=(0,E.Z)(i().mark(function t(n,c){var s,p;return i().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(n.status!==401){_.next=4;break}return localStorage.removeItem("auth"),M.m8.replace({pathname:"/user/login"}),_.abrupt("return",{name:n.name});case 4:if(n.status!==400){_.next=12;break}return _.next=7,n.clone().json();case 7:return s=_.sent,console.log("data",s),p=new Error(s.message),p.error=s.error,_.abrupt("return",p);case 12:return _.abrupt("return",n);case 13:case"end":return _.stop()}},t)}));return function(t,n){return f.apply(this,arguments)}}());var B=function(){var f=(0,E.Z)(i().mark(function t(n,c,s){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.ZP)(n,(0,O.Z)({method:"GET",params:c,skipErrorHandler:!0},s||{})));case 1:case"end":return r.stop()}},t)}));return function(n,c,s){return f.apply(this,arguments)}}(),b=function(){var f=(0,E.Z)(i().mark(function t(n,c,s){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.ZP)(n,(0,O.Z)({method:"POST",data:c,skipErrorHandler:!0},s||{}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},t)}));return function(n,c,s){return f.apply(this,arguments)}}(),A=function(){var f=(0,E.Z)(i().mark(function t(n,c,s){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.ZP)(n,(0,O.Z)({method:"PUT",data:c,skipErrorHandler:!0},s||{})));case 1:case"end":return r.stop()}},t)}));return function(n,c,s){return f.apply(this,arguments)}}(),Z=function(){var f=(0,E.Z)(i().mark(function t(n,c,s){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.ZP)(n,(0,O.Z)({method:"DELETE",data:c,skipErrorHandler:!0},s||{})));case 1:case"end":return r.stop()}},t)}));return function(n,c,s){return f.apply(this,arguments)}}()}}]);
