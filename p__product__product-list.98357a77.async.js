(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2812],{16894:function(J,T,e){"use strict";var E=e(54787),O=e(47888);T.ZP=O.Z},83318:function(J,T,e){"use strict";e.r(T);var E=e(14781),O=e(23492),f=e(13062),i=e(71230),M=e(57663),g=e(71577),j=e(89032),y=e(15746),S=e(47673),Z=e(4107),p=e(9715),a=e(86835),t=e(11849),c=e(14965),l=e(68588),d=e(2824),r=e(34792),n=e(48086),D=e(3182),u=e(71194),o=e(50146),ae=e(94043),I=e.n(ae),X=e(57119),se=e(49101),C=e(67294),_e=e(75362),ue=e(16894),G=e(43581),w=e(90380),s=e(85893),le=function(k){var H=o.Z.confirm,L=k.elementId,V=function(B){H({title:"Do you Want to delete ".concat(B.name,"?"),icon:(0,s.jsx)(X.Z,{}),content:"".concat(B.name," will be deleted permanently."),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var F=(0,D.Z)(I().mark(function K(){var A;return I().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return console.log("OK"),U.next=3,(0,w.Od)(B._id);case 3:A=U.sent,A.success&&(n.default.success(A.message),setFetchRoles(!0));case 5:case"end":return U.stop()}},K)}));function N(){return F.apply(this,arguments)}return N}(),onCancel:function(){console.log("Cancel")}})},z=(0,G.md)(),Q=z.canShow(L);if(Q){var x=z.isDisabled(L);return x?(0,s.jsx)("span",{children:"Delete"}):(0,s.jsx)("a",{onClick:function(){V(k.record)},children:"Delete"},"config")}return null},oe=function(){var k=(0,C.useRef)(),H=(0,C.useState)({data:[]}),L=(0,d.Z)(H,2),V=L[0],z=L[1],Q=(0,C.useState)(1),x=(0,d.Z)(Q,2),$=x[0],B=x[1],F=(0,C.useState)({}),N=(0,d.Z)(F,2),K=N[0],A=N[1],Y=(0,C.useState)({}),U=(0,d.Z)(Y,2),ce=U[0],q=U[1],de=(0,C.useState)(0),ee=(0,d.Z)(de,2),me=ee[0],fe=ee[1],pe=(0,C.useState)(!1),re=(0,d.Z)(pe,2),ne=re[0],W=re[1],he=l.Z.RangePicker,Ee=o.Z.confirm,ve=function(){var v=(0,D.Z)(I().mark(function _(){var h,b,P,R;return I().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return h=n.default.loading("Loading..."),m.prev=1,m.next=4,(0,w.yC)((0,t.Z)((0,t.Z)({current:$,pageSize:10},K),ce));case 4:return b=m.sent,h(),z(b),W(!1),m.abrupt("return",b);case 11:return m.prev=11,m.t0=m.catch(1),h(),P=JSON.stringify(m.t0),R=JSON.parse(P),console.log(R),n.default.error(R.data.errorMessage),m.abrupt("return",!1);case 19:case"end":return m.stop()}},_,null,[[1,11]])}));return function(){return v.apply(this,arguments)}}(),ye=function(_){Ee({title:"Do you Want to delete ".concat(_.name,"?"),icon:(0,s.jsx)(X.Z,{}),content:"".concat(_.name," will be deleted permanently."),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var h=(0,D.Z)(I().mark(function P(){var R;return I().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("OK"),m.next=3,(0,w.Od)(_._id);case 3:R=m.sent,R.success&&(n.default.success(R.message),W(!0));case 5:case"end":return m.stop()}},P)}));function b(){return h.apply(this,arguments)}return b}(),onCancel:function(){console.log("Cancel")}})},Pe=function(){var v=(0,D.Z)(I().mark(function _(){var h;return I().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,w.QX)((0,t.Z)({},K));case 2:h=P.sent,fe(h.total);case 4:case"end":return P.stop()}},_)}));return function(){return v.apply(this,arguments)}}();(0,C.useEffect)(function(){ne&&ve()},[ne]),(0,C.useEffect)(function(){B(1),q(null),W(!0),Pe()},[K]);var De=a.Z.useForm(),Oe=(0,d.Z)(De,1),te=Oe[0],ge=function(_){A(_)},be=[{title:"Name",dataIndex:"name",sorter:!0,tip:"Name of the product",render:function(_,h){return(0,s.jsx)("a",{onClick:function(){G.m8.push("/products/edit/".concat(h._id))},children:_})}},{title:"Description",dataIndex:"description",valueType:"textarea"},{title:"Price",dataIndex:"price",sorter:!0,renderText:function(_){return"".concat(_)}},{title:"Size",dataIndex:"size"},{title:"Manufacturing date",sorter:!0,dataIndex:"manufacturingDate",valueType:"dateTime"},{title:"Actions",dataIndex:"option",valueType:"option",render:function(_,h){return[(0,s.jsx)(le,{record:h,elementId:"product-list-delete-btn"},"delete")]}}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(_e.ZP,{children:[(0,s.jsx)(a.Z,{form:te,name:"advanced_search",className:"ant-advanced-search-form",onFinish:ge,style:{display:"flex","align-items":"left",background:"white",padding:"10px"},children:(0,s.jsxs)(i.Z,{gutter:16,children:[(0,s.jsx)(y.Z,{flex:6,children:(0,s.jsx)(a.Z.Item,{name:"name",label:"Name",children:(0,s.jsx)(Z.Z,{placeholder:"Search keyword for name"})})},"name"),(0,s.jsx)(y.Z,{flex:6,children:(0,s.jsx)(a.Z.Item,{name:"size",label:"Size",children:(0,s.jsx)(Z.Z,{placeholder:"Search keyword for size"})})},"size"),(0,s.jsx)(a.Z.Item,{name:"manufacturingDateRange",label:"M. date",children:(0,s.jsx)(he,{})}),(0,s.jsxs)(y.Z,{flex:6,children:[(0,s.jsx)(g.Z,{type:"primary",htmlType:"submit",children:"Search"}),(0,s.jsx)(g.Z,{style:{margin:"0 8px"},onClick:function(){te.resetFields()},children:"Clear"})]})]})}),(0,s.jsx)(ue.ZP,{headerTitle:"Products",actionRef:k,rowKey:"_id",search:!1,options:{reload:!1},toolBarRender:function(){return[(0,s.jsxs)(g.Z,{type:"primary",onClick:function(){G.m8.push("/products/new")},children:[(0,s.jsx)(se.Z,{})," New"]},"primary")]},onChange:function(_,h,b){console.log("_sorter",b);var P={};P.sort=b.field,P.order=b.order==="ascend"?1:-1,q(P),W(!0)},onSubmit:function(_){console.log(_),A(_)},dataSource:V.data,columns:be,rowSelection:!1,pagination:!1})]}),(0,s.jsx)(O.Z,{total:me,showSizeChanger:!1,showQuickJumper:!1,showTotal:function(_){return"Total ".concat(_," items")},defaultCurrent:$,onChange:function(_,h){B(_),W(!0)},style:{display:"flex","justify-content":"center","align-items":"center",background:"white",padding:"10px"}})]})};T.default=oe},90380:function(J,T,e){"use strict";e.d(T,{yC:function(){return M},QX:function(){return j},FO:function(){return S},Vx:function(){return p},a1:function(){return t},Od:function(){return l}});var E=e(3182),O=e(94043),f=e.n(O),i=e(39031);function M(r){return g.apply(this,arguments)}function g(){return g=(0,E.Z)(f().mark(function r(n){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.v_)("/api/products/search",n);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),g.apply(this,arguments)}function j(r,n){return y.apply(this,arguments)}function y(){return y=(0,E.Z)(f().mark(function r(n,D){return f().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.v_)("/api/products/count",n,D);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)})),y.apply(this,arguments)}function S(r,n){return Z.apply(this,arguments)}function Z(){return Z=(0,E.Z)(f().mark(function r(n,D){return f().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.U2)("/api/products/detail?id=".concat(n),{},D);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)})),Z.apply(this,arguments)}function p(r){return a.apply(this,arguments)}function a(){return a=(0,E.Z)(f().mark(function r(n){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.gz)("/api/products/update",n);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),a.apply(this,arguments)}function t(r){return c.apply(this,arguments)}function c(){return c=(0,E.Z)(f().mark(function r(n){return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.v_)("/api/products/create",n);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),c.apply(this,arguments)}function l(r,n){return d.apply(this,arguments)}function d(){return d=(0,E.Z)(f().mark(function r(n,D){return f().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.IV)("/api/products/delete?id=".concat(n),{},D);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)})),d.apply(this,arguments)}},39031:function(J,T,e){"use strict";e.d(T,{U2:function(){return j},v_:function(){return y},gz:function(){return S},IV:function(){return Z}});var E=e(3182),O=e(11849),f=e(94043),i=e.n(f),M=e(11238),g=e(43581);M.ZP.interceptors.request.use(function(p,a){var t=localStorage.getItem("auth");if(t&&JSON.parse(t)){var c=JSON.parse(t),l=c.token;l?a.headers.Authorization="Bearer ".concat(l):a.headers.Authorization=null}return console.log("url","http://localhost:8002",p),a.headers["rbac-client-time"]="".concat(new Date," "),{url:"".concat("http://localhost:8002").concat(p),options:(0,O.Z)((0,O.Z)({},a),{},{interceptors:!0})}}),M.ZP.interceptors.response.use(function(){var p=(0,E.Z)(i().mark(function a(t,c){var l,d;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.status!==401){n.next=4;break}return localStorage.removeItem("auth"),g.m8.replace({pathname:"/user/login"}),n.abrupt("return",{name:t.name});case 4:if(t.status!==403){n.next=7;break}return g.m8.replace({pathname:"/exception/403"}),n.abrupt("return",{name:t.name});case 7:if(t.status!==404){n.next=10;break}return g.m8.replace({pathname:"/exception/404"}),n.abrupt("return",{name:t.name});case 10:if(t.status!==400){n.next=18;break}return n.next=13,t.clone().json();case 13:return l=n.sent,console.log("data",l),d=new Error(l.message),d.error=l.error,n.abrupt("return",d);case 18:return n.abrupt("return",t);case 19:case"end":return n.stop()}},a)}));return function(a,t){return p.apply(this,arguments)}}());var j=function(){var p=(0,E.Z)(i().mark(function a(t,c,l){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.ZP)(t,(0,O.Z)({method:"GET",params:c,skipErrorHandler:!0},l||{})));case 1:case"end":return r.stop()}},a)}));return function(t,c,l){return p.apply(this,arguments)}}(),y=function(){var p=(0,E.Z)(i().mark(function a(t,c,l){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,M.ZP)(t,(0,O.Z)({method:"POST",data:c,skipErrorHandler:!0},l||{}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},a)}));return function(t,c,l){return p.apply(this,arguments)}}(),S=function(){var p=(0,E.Z)(i().mark(function a(t,c,l){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.ZP)(t,(0,O.Z)({method:"PUT",data:c,skipErrorHandler:!0},l||{})));case 1:case"end":return r.stop()}},a)}));return function(t,c,l){return p.apply(this,arguments)}}(),Z=function(){var p=(0,E.Z)(i().mark(function a(t,c,l){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.ZP)(t,(0,O.Z)({method:"DELETE",data:c,skipErrorHandler:!0},l||{})));case 1:case"end":return r.stop()}},a)}));return function(t,c,l){return p.apply(this,arguments)}}()}}]);
